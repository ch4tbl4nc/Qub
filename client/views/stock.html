<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QUB - Gestion de Stock</title>
  <link rel="stylesheet" href="styles/variables.css">
  <link rel="stylesheet" href="styles/global.css">
  <link rel="stylesheet" href="styles/stock.css">
</head>

<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <h1 class="logo">QUB</h1>

    <ul class="nav-menu">
      <li class="nav-item">
        <a href="dashboard.html" class="nav-link">
          <span class="nav-icon">üìä</span>
          Statistiques
        </a>
      </li>
      <li class="nav-item">
        <a href="stock.html" class="nav-link">
          <span class="nav-icon">üì¶</span>
          Gestion de Stock
        </a>
      </li>
      <li class="nav-item">
        <a href="add-product.html" class="nav-link">
          <span class="nav-icon">‚ûï</span>
          Ajouter un produit
        </a>
      </li>
      <li class="nav-item">
        <a href="historique.html" class="nav-link">
          <span class="nav-icon">üìã</span>
          Historique
        </a>
      </li>
      <li class="nav-item">
        <a href="contrats.html" class="nav-link">
          <span class="nav-icon">üìÑ</span>
          Contrats
        </a>
      </li>
    </ul>

    <div class="user-section">
      <div class="user-info glass-card">
        <div class="user-avatar" id="userAvatar">--</div>
        <div>
          <div class="user-name" id="userName">Chargement...</div>
          <div class="user-role" id="userRole">--</div>
        </div>
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <div class="page-header">
      <h1 class="page-title">Gestion de Stock</h1>
      <div class="header-actions">
      </div>
    </div>

    <!-- Alerts -->
    <div class="alerts-container">
      <!-- L'alerte sera ajout√©e dynamiquement si n√©cessaire -->
    </div>

    <!-- Stats Cards -->
    <div class="stock-stats">
      <div class="stat-card glass-card">
        <div class="stat-icon">üì¶</div>
        <div class="stat-info">
          <div class="stat-value" id="stockTotal">--</div>
          <div class="stat-label">Produits en stock</div>
        </div>
      </div>

      <div class="stat-card glass-card">
        <div class="stat-icon">‚ö†Ô∏è</div>
        <div class="stat-info">
          <div class="stat-value" id="stockLow">--</div>
          <div class="stat-label">Stock faible</div>
        </div>
      </div>

      <div class="stat-card glass-card">
        <div class="stat-icon">üè∑Ô∏è</div>
        <div class="stat-info">
          <div class="stat-value" id="stockCategories">--</div>
          <div class="stat-label">Cat√©gories</div>
        </div>
      </div>

      <div class="stat-card glass-card">
        <div class="stat-icon">üí∞</div>
        <div class="stat-info">
          <div class="stat-value" id="stockValue">--</div>
          <div class="stat-label">Valeur totale</div>
        </div>
      </div>
    </div>

    <!-- Filters -->
    <div class="filters-section glass-card">
      <div class="filter-group">
        <input type="text" class="input-field" placeholder="üîç Rechercher un produit..." id="searchInput">
      </div>

      <div class="filter-group">
        <select class="input-field" id="categoryFilter">
          <option value="">Toutes les cat√©gories</option>
          <option value="electronique">√âlectronique</option>
          <option value="informatique">Informatique</option>
          <option value="accessoires">Accessoires</option>
          <option value="audio">Audio</option>
        </select>
      </div>

      <div class="filter-group">
        <select class="input-field" id="supplierFilter">
          <option value="">Tous les fournisseurs</option>
          <option value="techcorp">TechCorp</option>
          <option value="electroplus">ElectroPlus</option>
          <option value="megadistrib">MegaDistrib</option>
        </select>
      </div>

      <div class="filter-group">
        <select class="input-field" id="stockFilter">
          <option value="">Tous les stocks</option>
          <option value="low">Stock faible</option>
          <option value="medium">Stock moyen</option>
          <option value="high">Stock √©lev√©</option>
        </select>
      </div>
    </div>

    <!-- Stock Table -->
    <div class="table-container glass-card">
      <table class="stock-table">
        <thead>
          <tr>
            <th>ID R√©f√©rence</th>
            <th>Nom du produit</th>
            <th>Cat√©gorie</th>
            <th>Prix</th>
            <th>Quantit√©</th>
            <th>Fournisseur</th>
            <th>√âtat</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="stockTableBody">
          <!-- Les lignes seront g√©n√©r√©es par JavaScript -->
        </tbody>
      </table>
    </div>
  </main>

  <!-- Modal Ajout/Modification Produit -->
  <div class="modal" id="productModal">
    <div class="modal-overlay"></div>
    <div class="modal-content glass-card">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">Ajouter un produit</h2>
        <button class="modal-close" id="closeModal">‚úï</button>
      </div>

      <form class="modal-body" id="addProductForm">
        <input type="text" class="input-field" id="productId" hidden required>

        <div class="form-row">
          <div class="input-group">
            <label class="input-label">Nom du produit</label>
            <input type="text" class="input-field" id="productName" required>
          </div>

          <div class="input-group">
            <label class="input-label">ID R√©f√©rence</label>
            <input type="text" class="input-field" id="productRef" disabled required>
          </div>
        </div>

        <div class="form-row">
          <div class="input-group">
            <label class="input-label">Cat√©gorie</label>
            <input type="text" class="input-field" id="productCategory" required>
          </div>

          <div class="input-group">
            <label class="input-label">Fournisseur</label>
            <select class="input-field" id="productSupplier" required>
              <option value="">S√©lectionner...</option>
              <option value="techcorp">TechCorp</option>
              <option value="electroplus">ElectroPlus</option>
              <option value="megadistrib">MegaDistrib</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="input-group">
            <label class="input-label">Prix (‚Ç¨)</label>
            <input type="number" class="input-field" id="productPrice" step="0.01" required>
          </div>

          <div class="input-group">
            <label class="input-label" for="productMargin">
              Marge (%) <span class="required">*</span>
            </label>
            <input type="number" class="input-field" id="productMargin" step="0.1" min="0" max="1000" placeholder="0.0"
              required>
            <small class="input-help">Marge b√©n√©ficiaire en pourcentage</small>
          </div>

          <div class="input-group">
            <label class="input-label">Quantit√©</label>
            <input type="number" class="input-field" id="productQuantity" required>
          </div>
        </div>

        <div class="input-group">
          <label class="input-label">Seuil d'alerte stock faible</label>
          <input type="number" class="input-field" id="productThreshold" value="10">
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="cancelBtn">Annuler</button>
          <button type="submit" class="btn btn-primary">Enregistrer</button>
        </div>
      </form>
    </div>
  </div>
  <script src="js/notifications.js"></script>
  <script src="js/auth.js"></script>
  <script>Auth.protectPage();</script>
  <script src="js/user-info.js"></script>
  <script src="js/stock-new.js"></script>
</body>

</html>